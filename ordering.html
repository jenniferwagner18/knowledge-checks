<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script>
function createCode()
{
//create array for original order input by instructor
var origArray = [];
var origColl = document.getElementsByName("order");
for (var i = 0; i < origColl.length; i++) {
  if (origColl[i].value !== null && origColl[i].value !== '') 
    {
      origArray.push(origColl[i].value);
    }
    
  else 
      {
        break;
      }
    } // end of for loop to create array from HTMLCollection

// only create code if original collection is not empty
for (var i = 0; i < origColl.length; i++) {
  if (origColl[i].value !== null && origColl[i].value !== '')
  {
// shuffle original array elements
do {
     var shuffledArray = d3.shuffle(origArray.slice());
    } while (JSON.stringify(shuffledArray) === JSON.stringify(origArray));
  
//display directions
var directions = document.getElementById("directions").value;
  document.getElementById("generate").insertAdjacentHTML('beforeend', '<pre>&lt;p&gt;' + directions + '&lt;/p&gt;</pre>');
 
// display shuffled array elements next to input boxes
var qnumber = document.getElementById("qnumber").value;
for (var i = 0; i < shuffledArray.length; i++) {
    document.getElementById("generate").insertAdjacentHTML('beforeend', '<pre>&lt;p&gt; &lt;input id="answer' + (i+1) + '" name="answer' + qnumber + '" type="text" size="1"&gt; ' + shuffledArray[i] + '&lt;/p&gt;</pre>');
    } // end of for loop
  
document.getElementById("generate").insertAdjacentHTML('beforeend', '<pre>&lt;button class="btn btn-light" onclick="checkOrder' + qnumber + '()"&gt;Submit&lt;/button&gt; &lt;br&gt;&lt;br&gt; &lt;p id="results' + qnumber + '"&gt; &lt;/p&gt;&lt;script&gt;function checkOrder' + qnumber + '() {var result' + qnumber + '; var guessArray' + qnumber + ' = []; var guessColl' + qnumber + ' = document.getElementsByName("answer' + qnumber + '"); for (var i = 0; i < guessColl' + qnumber + '.length; i++) { if (guessColl' + qnumber + '[i].value !== null && guessColl' + qnumber + '[i].value !== "") { guessArray' + qnumber + '.push(guessColl' + qnumber + '[i].value); } } var correctOrder' + qnumber + ' = [');

  // create array for correct order
for (var i = 0; i < shuffledArray.length; i++) {
   document.getElementById("generate").insertAdjacentHTML('beforeend', '<pre>"' + (origArray.indexOf(shuffledArray[i]) + 1) + '", ');
} // end of for loop

 document.getElementById("generate").insertAdjacentHTML('beforeend', '<pre>]; if (JSON.stringify(guessArray' + qnumber + ') === JSON.stringify(correctOrder' + qnumber + ')) {result' + qnumber + ' = \"&lt;b style=\'color:green\'&gt;Correct!&lt;/b&gt;";}else {result' + qnumber + ' = "&lt;b style=\'color:red\'&gt;Incorrect! Try again!&lt;/b&gt;";}document.getElementById("results' + qnumber + '").innerHTML = result' + qnumber +  ';}&lt;/script&gt; &lt;p&gt;&lt;/p&gt;</pre>'); 
    
} // end of if collection not empty
else 
      {
        break;
      } 
} // end of for loop 
} // end of createCode function
  
function copyCode(id)
{
var r = document.createRange();
r.selectNode(document.getElementById(id));
window.getSelection().removeAllRanges();
window.getSelection().addRange(r);
document.execCommand('copy');
window.getSelection().removeAllRanges();
}

function clearCode(id)
{
  document.getElementById(id).innerHTML = "";
  for (var i = 0; i < document.getElementsByName("order").length; i++) {
    document.getElementsByName("order")[i].value = "";
}
}
</script>
</head>
<body>
  <div class="container-fluid">
<div class="row">
<div class="col-sm-10 offset-sm-1">
  <br><br>
  <h2>Sample Ordering Question</h2>
<p>Order the following states from largest (1) to smallest (6) by area.</p>
<p><input id="answer1" name="answer" type="text" size="1"/> Louisiana</p>
<p><input id="answer2" name="answer" type="text" size="1"/> South Carolina</p>
<p><input id="answer3" name="answer" type="text" size="1"/> Oklahoma</p>
<p><input id="answer4" name="answer" type="text" size="1"/> Alaska</p>
<p><input id="answer5" name="answer" type="text" size="1"/> Montana</p>
<p><input id="answer6" name="answer" type="text" size="1"/> Rhode Island</p>
 <button id="btn" class="btn btn-light" onclick="checkOrder()">Submit</button>
 <br><br>
  <p id="results"></p>
<script>
function checkOrder() {
var result;
// create array from student guesses
var guessArray = [];
var guessColl = document.getElementsByName("answer");
for (var i = 0; i < guessColl.length; i++) {
  if (guessColl[i].value !== null && guessColl[i].value !== '') { 
    guessArray.push(guessColl[i].value);
  }
    }
// set correct order
var correctOrder = ["4", "5", "3", "1", "2", "6"]; 
// determine if student guesses match correct order
if (JSON.stringify(guessArray) === JSON.stringify(correctOrder)) {result = "<b style='color:green'>Correct!</b>";} 
else {result = "<b style='color:red'>Incorrect! Try again!</b>";}
document.getElementById("results").innerHTML = result;}
</script>  <hr>
<h2>Create Ordering Question</h2>

<p>Enter the question number: <input id="qnumber" type="text" size="5" /> (You can leave this blank if you only need one question per page)   </p>
<p> Enter the directions: <input id="directions" type="text" size="50" /></p>
  <p>Enter the answers in the correct order below. They will be shuffled when the code is generated.</p>
<p> 1. <input id="order1" name="order" type="text" size="30" /></p>
<p> 2. <input id="order2" name="order" type="text" size="30" /></p>
<p> 3. <input id="order3" name="order" type="text" size="30" /></p>
<p> 4. <input id="order4" name="order" type="text" size="30" /></p>
<p> 5. <input id="order5" name="order" type="text" size="30" /></p>
<p> 6. <input id="order6" name="order" type="text" size="30" /></p>
  
<p><button class="btn btn-light" onclick="createCode()">Create Code</button> </p>

<p>Code will generate below:</p>
<p id="generate" style="user-select: all;" class="bg-light"></p>

<button id="copied" class="btn btn-light" onclick="copyCode('generate')">Copy Code</button>
<button id="clear" class="btn btn-light" onclick="clearCode('generate')">Clear Code</button>
  
  <hr>
  <h2> Copy & Paste Code</h2>
<p>Click the Copy Code button above to copy the code to the clipboard. On your D2L page, open the HTML editor, click the Insert Stuff icon, choose Enter Embed Code, right-click and choose Paste. (The preview will not be accurate.)</p>

<p><strong>Make sure to click Save and Close BEFORE testing the buttons. DO NOT CLICK on the buttons while still in editing mode or D2L will change the code.</strong></p>

<p>To add another question, click Clear Code above to clear out the boxes and start over.</p>

<p>Student answers are not tracked or graded and will be reset when refreshing the page.</p>  
  
</div>
</div>
</div>

<script>
$(document).ready(function(){
    $('#copied').tooltip({title: "Code Copied!", trigger: "click", placement: "bottom"});
  });
$('#clear').click(function(){
    $('#copied').tooltip('hide');
  });
</script>
</body>
</html>
